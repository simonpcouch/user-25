<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/quarto-contrib/videojs/video.min.js"></script>
<link href="site_libs/quarto-contrib/videojs/video-js.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <title>index</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-d8188bb9780597fb332dba0ee4f71e99.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section class="slide level2">

<p><span style="color:#b17dc3; font-size:270%; font-weight:bold;">Small boosts, here and there</span> <a href="https://simonpcouch.github.io/chores/"><img src="figures/chores-hex.png" alt="The hex sticker for the chores package: A cartoon of a light orange blob happily holding a clipboard with a checklist in one hand. The blob is set against a purple hexagon outlined in a lighter orange. The word 'chores' is written diagonally in white in the upper right of the purple hexagon." align="right" height="340"></a></p>
<p><br><br><br> <em>Simon Couch</em> - <span class="citation" data-cites="simonpcouch">@simonpcouch</span></p>
<p>Open Source Group @ Posit, R / LLMs</p>
<!-- Rather than writing an entire R package or carrying out a data analysis in one fell swoop, I’m interested in large language models (LLMs) doing things for me that I don’t like to do: tedious little refactors, transitioning from deprecated APIs, and templating out boilerplate. Chores, if you will. This talk introduces chores, an R package implementing an extensible library of LLM assistants to help with repetitive but hard-to-automate tasks. -->
</section>
<section id="example" class="slide level2">
<h2>Example</h2>
<!-- As an R package developer, one thing I do many times a day is write R function documentation using [roxygen2](https://roxygen2.r-lib.org/). For example, imagine I'm working on this function: -->

<img data-src="figures/1-source.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="example-1" class="slide level2">
<h2>Example</h2>
<!-- The function grabs the value of an environmental variable, providing a nicely formatted error message if it can't find it. For example, the `HOME` environmental variable shows my home folder on macOS: -->
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">key_get</span>(<span class="st">"HOME"</span>)</span>
<span id="cb1-2"><a></a><span class="co">#&gt; [1] "/Users/simoncouch"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- This variable doesn't exist, though: -->
<p><br><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">key_get</span>(<span class="st">"IM_A_SILLY_GOOSE"</span>)</span>
<span id="cb2-2"><a></a><span class="co">#&gt; Error:</span></span>
<span id="cb2-3"><a></a><span class="co">#&gt; ! Can't find env var `IM_A_SILLY_GOOSE`.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- This function is ready to export from my package. So, the next step is to write inline documentation using roxygen2. Before I can write about how this function is connected to other topics in my package and any interesting notes about how it can be used, there's 100-characters-or-so of boilerplate that basically follows directly from the source code of the function. e.g. there are two arguments—`name`and `error_call`—and one of them has a default argument, and so on. That will take me a minute or so to type out, and I won't really enjoy doing so.

What if I didn't have to? The chores package supplies a helper for this task: scaffolding out minimal roxygen2 documentation. -->
</section>
<section class="slide level2">

<video id="video_shortcode_videojs_video1" class="video-js vjs-default-skin vjs-fluid" controls="" preload="auto" data-setup="{}" title=""><source src="figures/chore-roxygen.mov"></video>
<!-- In the above video, I:

-   Select my function,

-   Press a keyboard shortcut,

-   Select the "roxygen" helper from a dropdown, and

-   Press \[Enter\]

At that point, inline roxygen2 comments begin streaming into my document about my function. Notably, the output is quite minimal; the `@param` entries just give the argument name and a description of their type, there's a brief `@returns` section, and an `@export` tag. These are the bits of roxygen2 boilerplate that I would likely have written almost exactly the same if I had done so myself. Once this boilerplate is in place, I can check over it and add notes on the interesting parts of what the function does. This is a minute worth of work I wouldn't particularly enjoy doing—and that would otherwise be quite difficult to automate without LLMs—done for me. -->
</section>
<section>
<section id="how-it-works" class="title-slide slide level1 center">
<h1>How it works</h1>

</section>
<section id="how-it-works-1" class="slide level2">
<h2>How it works</h2>
<ul>
<li>The user:
<ul>
<li>…makes a code selection</li>
<li>..triggers the addin and selects a helper</li>
</ul></li>
<li>The selected helper is matched up with its prompt</li>
<li><code>c(helper_prompt, selection)</code> is sent to the LLM</li>
<li>The response is written to the editor using rstudioapi</li>
</ul>
</section>
<section id="how-it-works-2" class="slide level2">
<h2>How it works</h2>
<ul>
<li>The user:
<ul>
<li>…makes a code selection</li>
<li>..triggers the addin and selects a helper</li>
</ul></li>
<li><span style="color: #e2d6e6;">The selected helper is matched up with its prompt</span></li>
<li><span style="color: #e2d6e6;">c(helper_prompt, selection) is sent to the LLM</span></li>
<li><span style="color: #e2d6e6;">The response is written to the editor using rstudioapi</span></li>
</ul>
</section>
<section id="how-it-works-3" class="slide level2">
<h2>How it works</h2>

<img data-src="figures/1-source.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="how-it-works-4" class="slide level2">
<h2>How it works</h2>

<img data-src="figures/2-source.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="how-it-works-5" class="slide level2">
<h2>How it works</h2>

<img data-src="figures/3-source.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="how-it-works-6" class="slide level2">
<h2>How it works</h2>
<ul>
<li>The user:
<ul>
<li>…makes a code selection</li>
<li>..triggers the addin and selects a helper</li>
</ul></li>
<li><span style="color: #e2d6e6;">The selected helper is matched up with its prompt</span></li>
<li><span style="color: #e2d6e6;">c(helper_prompt, selection) is sent to the LLM</span></li>
<li><span style="color: #e2d6e6;">The response is written to the editor using rstudioapi</span></li>
</ul>
</section>
<section id="how-it-works-7" class="slide level2">
<h2>How it works</h2>
<ul>
<li>The user:
<ul>
<li>…makes a code selection</li>
<li>..triggers the addin and selects a helper</li>
</ul></li>
<li>The selected helper is matched up with its prompt</li>
<li><span style="color: #e2d6e6;">c(helper_prompt, selection) is sent to the LLM</span></li>
<li><span style="color: #e2d6e6;">The response is written to the editor using rstudioapi</span></li>
</ul>
</section>
<section id="how-it-works-8" class="slide level2">
<h2>How it works</h2>
<!-- The chores package manages a directory of markdown files, each of which contains instructions on how to do a certain task, or "prompts." Here's the current prompt associated with the roxygen chore: -->
<p>A <em>prompt</em> defines the desired behavior:</p>
<div style="height: 400px; overflow-y: auto; border: 1px solid #ddd; border-radius: 10px; padding: 20px; background-color: #f8f9fa; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); font-size: 0.5em;">
<p><strong>Templating function documentation</strong></p>
<p>You are a terse assistant designed to help R package developers quickly template out their function documentation using roxygen2. Given some highlighted function code, return minimal documentation on the function’s parameters and return type. Beyond those two elements, be sparing so as not to describe things you don’t have context for. Respond with <em>only</em> R <code>#'</code> roxygen2 comments—no backticks or newlines around the response, no further commentary.</p>
<p>For function parameters in <code>@params</code>, describe each according to their type (e.g.&nbsp;“A numeric vector” or “A single string”) and note if the parameter isn’t required by writing “Optional” if it has a default value. If the parameters have a default enum (e.g.&nbsp;<code>arg = c("a", "b", "c")</code>), write them out as ‘one of <code>"a"</code>, <code>"b"</code>, or <code>"c"</code>.’ If there are ellipses in the function signature, note what happens to them. If they’re checked with <code>rlang::check_dots_empty()</code> or otherwise, document them as “Currently unused; must be empty.” If the ellipses are passed along to another function, note which function they’re passed to.</p>
<p>For the return type in <code>@returns</code>, note any important errors or warnings that might occur and under what conditions. If the <code>output</code> is returned with <code>invisible(output)</code>, note that it’s returned “invisibly.”</p>
<p><strong>Here are some examples:</strong></p>
<p>Given:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>key_get <span class="ot">&lt;-</span> <span class="cf">function</span>(name, <span class="at">error_call =</span> <span class="fu">caller_env</span>()) {</span>
<span id="cb3-2"><a></a>  val <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(name)</span>
<span id="cb3-3"><a></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">identical</span>(val, <span class="st">""</span>)) {</span>
<span id="cb3-4"><a></a>    val</span>
<span id="cb3-5"><a></a>  } <span class="cf">else</span> {</span>
<span id="cb3-6"><a></a>    <span class="cf">if</span> (<span class="fu">is_testing</span>()) {</span>
<span id="cb3-7"><a></a>      testthat<span class="sc">::</span><span class="fu">skip</span>(<span class="fu">sprintf</span>(<span class="st">"%s env var is not configured"</span>, name))</span>
<span id="cb3-8"><a></a>    } <span class="cf">else</span> {</span>
<span id="cb3-9"><a></a>      cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="st">"Can't find env var {.code {name}}."</span>, <span class="at">call =</span> error_call)</span>
<span id="cb3-10"><a></a>    }</span>
<span id="cb3-11"><a></a>  }</span>
<span id="cb3-12"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Reply with:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="co">#' Get key</span></span>
<span id="cb4-2"><a></a><span class="co">#'</span></span>
<span id="cb4-3"><a></a><span class="co">#' @description</span></span>
<span id="cb4-4"><a></a><span class="co">#' A short description...</span></span>
<span id="cb4-5"><a></a><span class="co">#' </span></span>
<span id="cb4-6"><a></a><span class="co">#' @param name A single string.</span></span>
<span id="cb4-7"><a></a><span class="co">#' @param error_call A call to mention in error messages. Optional.</span></span>
<span id="cb4-8"><a></a><span class="co">#'</span></span>
<span id="cb4-9"><a></a><span class="co">#' @returns </span></span>
<span id="cb4-10"><a></a><span class="co">#' If found, the value corresponding to the provided `name`. Otherwise,</span></span>
<span id="cb4-11"><a></a><span class="co">#' the function will error.</span></span>
<span id="cb4-12"><a></a><span class="co">#'</span></span>
<span id="cb4-13"><a></a><span class="co">#' @export</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Given:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>chat_perform <span class="ot">&lt;-</span> <span class="cf">function</span>(provider,</span>
<span id="cb5-2"><a></a>                         <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">"value"</span>, <span class="st">"stream"</span>, <span class="st">"async-stream"</span>, <span class="st">"async-value"</span>),</span>
<span id="cb5-3"><a></a>                         turns,</span>
<span id="cb5-4"><a></a>                         <span class="at">tools =</span> <span class="fu">list</span>(),</span>
<span id="cb5-5"><a></a>                         <span class="at">extra_args =</span> <span class="fu">list</span>()) {</span>
<span id="cb5-6"><a></a></span>
<span id="cb5-7"><a></a>  mode <span class="ot">&lt;-</span> <span class="fu">arg_match</span>(mode)</span>
<span id="cb5-8"><a></a>  stream <span class="ot">&lt;-</span> mode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"stream"</span>, <span class="st">"async-stream"</span>)</span>
<span id="cb5-9"><a></a></span>
<span id="cb5-10"><a></a>  req <span class="ot">&lt;-</span> <span class="fu">chat_request</span>(</span>
<span id="cb5-11"><a></a>    <span class="at">provider =</span> provider,</span>
<span id="cb5-12"><a></a>    <span class="at">turns =</span> turns,</span>
<span id="cb5-13"><a></a>    <span class="at">tools =</span> tools,</span>
<span id="cb5-14"><a></a>    <span class="at">stream =</span> stream,</span>
<span id="cb5-15"><a></a>    <span class="at">extra_args =</span> extra_args</span>
<span id="cb5-16"><a></a>  )</span>
<span id="cb5-17"><a></a></span>
<span id="cb5-18"><a></a>  <span class="cf">switch</span>(mode,</span>
<span id="cb5-19"><a></a>    <span class="st">"value"</span> <span class="ot">=</span> <span class="fu">chat_perform_value</span>(provider, req),</span>
<span id="cb5-20"><a></a>    <span class="st">"stream"</span> <span class="ot">=</span> <span class="fu">chat_perform_stream</span>(provider, req),</span>
<span id="cb5-21"><a></a>    <span class="st">"async-value"</span> <span class="ot">=</span> <span class="fu">chat_perform_async_value</span>(provider, req),</span>
<span id="cb5-22"><a></a>    <span class="st">"async-stream"</span> <span class="ot">=</span> <span class="fu">chat_perform_async_stream</span>(provider, req)</span>
<span id="cb5-23"><a></a>  )</span>
<span id="cb5-24"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Reply with:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="co">#' Perform chat</span></span>
<span id="cb6-2"><a></a><span class="co">#'</span></span>
<span id="cb6-3"><a></a><span class="co">#' @description</span></span>
<span id="cb6-4"><a></a><span class="co">#' A short description...</span></span>
<span id="cb6-5"><a></a><span class="co">#' </span></span>
<span id="cb6-6"><a></a><span class="co">#' @param provider A provider.</span></span>
<span id="cb6-7"><a></a><span class="co">#' @param mode One of `"value"`, `"stream"`, `"async-stream"`, or `"async-value"`.</span></span>
<span id="cb6-8"><a></a><span class="co">#' @param turns Turns.</span></span>
<span id="cb6-9"><a></a><span class="co">#' @param tools Optional. A list of tools.</span></span>
<span id="cb6-10"><a></a><span class="co">#' @param extra_args Optional. A list of extra arguments.</span></span>
<span id="cb6-11"><a></a><span class="co">#'</span></span>
<span id="cb6-12"><a></a><span class="co">#' @returns </span></span>
<span id="cb6-13"><a></a><span class="co">#' A result.</span></span>
<span id="cb6-14"><a></a><span class="co">#'</span></span>
<span id="cb6-15"><a></a><span class="co">#' @export</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Given:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>check_args <span class="ot">&lt;-</span> <span class="cf">function</span>(fn, ...) {</span>
<span id="cb7-2"><a></a>  rlang<span class="sc">::</span><span class="fu">check_dots_empty</span>()</span>
<span id="cb7-3"><a></a>  arg_names <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">formals</span>(fn))</span>
<span id="cb7-4"><a></a>  <span class="cf">if</span> (<span class="fu">length</span>(arg_names) <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb7-5"><a></a>    cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="st">"Function must have at least two arguments."</span>, <span class="at">.internal =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-6"><a></a>  } <span class="cf">else</span> <span class="cf">if</span> (arg_names[[<span class="dv">1</span>]] <span class="sc">!=</span> <span class="st">"self"</span>) {</span>
<span id="cb7-7"><a></a>    cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="st">"First argument must be {.arg self}."</span>, <span class="at">.internal =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-8"><a></a>  } <span class="cf">else</span> <span class="cf">if</span> (arg_names[[<span class="dv">2</span>]] <span class="sc">!=</span> <span class="st">"private"</span>) {</span>
<span id="cb7-9"><a></a>    cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="st">"Second argument must be {.arg private}."</span>, <span class="at">.internal =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-10"><a></a>  }</span>
<span id="cb7-11"><a></a>  <span class="fu">invisible</span>(fn)</span>
<span id="cb7-12"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Reply with:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a><span class="co">#' Check a function's arguments</span></span>
<span id="cb8-2"><a></a><span class="co">#'</span></span>
<span id="cb8-3"><a></a><span class="co">#' @description</span></span>
<span id="cb8-4"><a></a><span class="co">#' A short description...</span></span>
<span id="cb8-5"><a></a><span class="co">#' </span></span>
<span id="cb8-6"><a></a><span class="co">#' @param fn A function.</span></span>
<span id="cb8-7"><a></a><span class="co">#' @param ... Currently unused; must be empty.</span></span>
<span id="cb8-8"><a></a><span class="co">#'</span></span>
<span id="cb8-9"><a></a><span class="co">#' @returns </span></span>
<span id="cb8-10"><a></a><span class="co">#' `fn`, invisibly. The function will instead raise an error if the function</span></span>
<span id="cb8-11"><a></a><span class="co">#' doesn't take first argument `self` and second argument `private`.</span></span>
<span id="cb8-12"><a></a><span class="co">#'</span></span>
<span id="cb8-13"><a></a><span class="co">#' @export</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When two functions are supplied, only provide documentation for the first function, only making use of later functions as additional context. For example:</p>
<p>Given:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>check_args <span class="ot">&lt;-</span> <span class="cf">function</span>(fn, ...) {</span>
<span id="cb9-2"><a></a>  rlang<span class="sc">::</span><span class="fu">check_dots_empty</span>()</span>
<span id="cb9-3"><a></a>  arg_names <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">formals</span>(fn))</span>
<span id="cb9-4"><a></a>  <span class="cf">if</span> (<span class="fu">length</span>(arg_names) <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb9-5"><a></a>    <span class="fu">error_less_than_two_args</span>()</span>
<span id="cb9-6"><a></a>  } <span class="cf">else</span> <span class="cf">if</span> (arg_names[[<span class="dv">1</span>]] <span class="sc">!=</span> <span class="st">"self"</span>) {</span>
<span id="cb9-7"><a></a>    cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="st">"First argument must be {.arg self}."</span>, <span class="at">.internal =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-8"><a></a>  } <span class="cf">else</span> <span class="cf">if</span> (arg_names[[<span class="dv">2</span>]] <span class="sc">!=</span> <span class="st">"private"</span>) {</span>
<span id="cb9-9"><a></a>    cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="st">"Second argument must be {.arg private}."</span>, <span class="at">.internal =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-10"><a></a>  }</span>
<span id="cb9-11"><a></a>  <span class="fu">invisible</span>(fn)</span>
<span id="cb9-12"><a></a>}</span>
<span id="cb9-13"><a></a></span>
<span id="cb9-14"><a></a>error_less_than_two_args <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">call =</span> <span class="fu">caller_env</span>()) {</span>
<span id="cb9-15"><a></a>  cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="st">"Function must have at least two arguments."</span>, <span class="at">call =</span> call, <span class="at">.internal =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-16"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Reply with:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="co">#' Check a function's arguments</span></span>
<span id="cb10-2"><a></a><span class="co">#'</span></span>
<span id="cb10-3"><a></a><span class="co">#' @description</span></span>
<span id="cb10-4"><a></a><span class="co">#' A short description...</span></span>
<span id="cb10-5"><a></a><span class="co">#' </span></span>
<span id="cb10-6"><a></a><span class="co">#' @param fn A function.</span></span>
<span id="cb10-7"><a></a><span class="co">#' @param ... Currently unused; must be empty.</span></span>
<span id="cb10-8"><a></a><span class="co">#'</span></span>
<span id="cb10-9"><a></a><span class="co">#' @returns </span></span>
<span id="cb10-10"><a></a><span class="co">#' `fn`, invisibly. The function will instead raise an error if the function</span></span>
<span id="cb10-11"><a></a><span class="co">#' doesn't take first argument `self` and second argument `private`.</span></span>
<span id="cb10-12"><a></a><span class="co">#'</span></span>
<span id="cb10-13"><a></a><span class="co">#' @export</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-it-works-9" class="slide level2">
<h2>How it works</h2>
<ul>
<li>The user:
<ul>
<li>…makes a code selection</li>
<li>..triggers the addin and selects a helper</li>
</ul></li>
<li>The selected helper is matched up with its prompt</li>
<li><span style="color: #e2d6e6;">c(helper_prompt, selection) is sent to the LLM</span></li>
<li><span style="color: #e2d6e6;">The response is written to the editor using rstudioapi</span></li>
</ul>
</section>
<section id="how-it-works-10" class="slide level2">
<h2>How it works</h2>
<ul>
<li>The user:
<ul>
<li>…makes a code selection</li>
<li>..triggers the addin and selects a helper</li>
</ul></li>
<li>The selected helper is matched up with its prompt</li>
<li><code>c(helper_prompt, selection)</code> is sent to the LLM</li>
<li><span style="color: #e2d6e6;">The response is written to the editor using rstudioapi</span></li>
</ul>
</section>
<section id="how-it-works-11" class="slide level2">
<h2>How it works</h2>
<!-- When a prompt file lives in the chores directory, the name of the file appears in that dropdown shown in the video. Then, when you select a chore from the dropdown, its associated prompt is submitted to the model along with the code selection you've made using ellmer. The response from the model is then written to your file as it's received.
 -->
<p>If you’re an ellmer user, writing that out yourself might look like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a><span class="fu">library</span>(ellmer)</span>
<span id="cb11-2"><a></a></span>
<span id="cb11-3"><a></a>ch <span class="ot">&lt;-</span> <span class="fu">chat_anthropic</span>(<span class="at">system_prompt =</span> the_prompt_from_last_slide)</span>
<span id="cb11-4"><a></a> </span>
<span id="cb11-5"><a></a>ch<span class="sc">$</span><span class="fu">chat</span>(<span class="st">"&lt;the selected code&gt;"</span>)</span>
<span id="cb11-6"><a></a><span class="co">#&gt; #' The documentation for the selected code.</span></span>
<span id="cb11-7"><a></a><span class="co">#&gt; #' </span></span>
<span id="cb11-8"><a></a><span class="co">#&gt; #' Yada yada yada.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-it-works-12" class="slide level2">
<h2>How it works</h2>
<ul>
<li>The user:
<ul>
<li>…makes a code selection</li>
<li>..triggers the addin and selects a helper</li>
</ul></li>
<li>The selected helper is matched up with its prompt</li>
<li><code>c(helper_prompt, selection)</code> is sent to the LLM</li>
<li><span style="color: #e2d6e6;">The response is written to the editor using rstudioapi</span></li>
</ul>
</section>
<section id="how-it-works-13" class="slide level2">
<h2>How it works</h2>
<ul>
<li>The user:
<ul>
<li>…makes a code selection</li>
<li>..triggers the addin and selects a helper</li>
</ul></li>
<li>The selected helper is matched up with its prompt</li>
<li><code>c(helper_prompt, selection)</code> is sent to the LLM</li>
<li>The response is written to the editor using rstudioapi</li>
</ul>
</section>
<section id="how-it-works-14" class="slide level2">
<h2>How it works</h2>

<img data-src="figures/4-source.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="whats-possible" class="slide level2">
<h2>What’s possible</h2>
<p>The package ships with helpers for R package development:</p>
<ul>
<li>Templating roxygen documentation</li>
<li>Transitioning erroring code to use the cli package</li>
<li>Transitioning testthat code to use the 3rd edition</li>
</ul>
</section>
<section id="whats-possible-1" class="slide level2">
<h2>What’s possible</h2>
<p>Any coding task that:</p>
<ol type="1">
<li>Can be described in a markdown file</li>
<li>Can be applied with a code selection as context</li>
</ol>
<div class="fragment">
<p>In <em>either</em> RStudio or Positron!</p>
<!--  ## What's possible -->
<!-- The [roxygen helper](https://simonpcouch.github.io/chores/reference/roxygen_helper.html) is one of three helpers supplied with the chores package. There's also a [testthat helper](https://simonpcouch.github.io/chores/reference/testthat_helper.html), which transitions unit testing code to the third edition of testthat, and a [cli helper](https://simonpcouch.github.io/chores/reference/cli_helper.html), which transitions erroring code to use the cli package. These three helpers that ship with the package are focused on R package development, as that's where I've gotten the most mileage out of the interface. -->
<!-- That said, the package allows you to [write your own helpers](https://simonpcouch.github.io/chores/articles/custom.html), and all that that takes is a couple paragraphs and an example or two in a markdown file. The [chores gallery](https://simonpcouch.github.io/chores/articles/gallery.html) highlights various custom helpers folks have written since the package came to be: -->
<!-- <iframe 
  src="https://simonpcouch.github.io/chores/articles/gallery.html" 
  width="100%" 
  height="500px" 
  style="border: 1px solid #ddd; border-radius: 10px; overflow: auto; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
  Your browser does not support iframes.
</iframe> -->
<!-- For example, Hannah Frick wrote [a helper to migrate code chunk options](https://gist.github.com/hfrick/1ca8fc2cb2a4409b743e8120c6cc2223) from R Markdown to Quarto format, and Hadley Wickham wrote [a helper to polish NEWS changelogs](https://gist.github.com/simonpcouch/8dbb3cd1fd79f9525bc1476d6fa7b668) before package releases. If you write your own helper prompt and would like it to be featured in the gallery, I'd be glad to review your pull request! -->
</div>
</section></section>
<section>
<section id="choosing-an-llm" class="title-slide slide level1 center">
<h1>Choosing an LLM</h1>

</section>
<section id="choosing-an-llm-1" class="slide level2">
<h2>Choosing an LLM</h2>
<p><br></p>
<p>How much do chore helpers cost to use?</p>
<p><br></p>
<p>About $1 per 100 refactorings with Claude Sonnet 4.</p>
</section>
<section id="choosing-an-llm-2" class="slide level2">
<h2>Choosing an LLM</h2>
<p>Cheaper models are less performant:</p>

<img data-src="index_files/figure-revealjs/plot-helper-costs-1.png" alt="ggplot2 scatter plot showing LLM evaluation scores vs pricing. Y-axis: evaluation score (0.57-0.95). X-axis: price per 100 refactorings ($0.01-$10, log scale). Models clustered by provider: Anthropic (red), Google/Gemini (green), OpenAI (blue). Gemini models achieve highest scores (0.90) at mid-range pricing ($0.10-0.30). Claude models show high scores at premium pricing ($10+). OpenAI models span lower scores across varied price points." width="960" class="r-stretch"><div class="footer">
<p><span style="color:#f4c19a;">https://simonpcouch.github.io/choreseval/</span></p>
</div>
</section>
<section id="choosing-an-llm-3" class="slide level2">
<h2>Choosing an LLM</h2>
<p><br></p>
<p>How about local LLMs?</p>
<div class="fragment">
<p><br></p>
<p>I’m trying! We may not be there quite yet.</p>
<div class="footer">
<p><span style="color:#f4c19a;">https://simonpcouch.github.io/choreseval/</span></p>
</div>
</div>
</section>
<section id="choosing-an-llm-4" class="slide level2">
<h2>Choosing an LLM</h2>

<img data-src="figures/choreseval.png" class="quarto-figure quarto-figure-center r-stretch"><div class="footer">
<p><span style="color:#f4c19a;">https://simonpcouch.github.io/choreseval/</span></p>
</div>
</section>
<section id="choosing-an-llm-5" class="slide level2">
<h2>Choosing an LLM</h2>
<p><br></p>
<p>If privacy is less of a concern (i.e.&nbsp;the code you highlight is not sensitive IP), GitHub hosts many models with generous free tiers.</p>
<p><br></p>
<p>Use <code>chat_github()</code> with ellmer.</p>
</section>
<section id="learn-more" class="slide level2">
<h2>Learn more</h2>
<p><br></p>
<span style="font-size:150%">
<center>
<span style="color:#c46938;">github.com/simonpcouch/user-25</span>
</center>
<p></p>
<p><br></p>
<div class="footer">

</div>


</span></section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><span style="color:#f4c19a;">github.com/simonpcouch/user-25</span></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    <script>videojs(video_shortcode_videojs_video1);</script>
    

</body></html>